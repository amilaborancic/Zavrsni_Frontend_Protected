{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Azra\\\\Desktop\\\\Zavrsni\\\\#tech\\\\pokusaj\\\\src\\\\Shop.js\";\nimport React from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Item from \"./Item\";\nimport axios from \"axios\";\n\nclass Shop extends React.Component {\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      //searchbar\n      this.setState({\n        keyword: e.target.value\n      });\n    };\n\n    this.handleSearch = e => {\n      e.preventDefault();\n\n      if (this.state.keyword != \"\") {\n        axios.get(\"http://localhost:8080/search/\" + this.state.keyword).then(res => {\n          if (res.data.success) {\n            if (res.data.data.length == 0) {\n              this.setState({\n                emptyMsg: React.createElement(\"label\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 53\n                  },\n                  __self: this\n                }, \"There aren't any products with that name.\"),\n                prikazi: false\n              });\n            } else {\n              this.setState({\n                emptyMsg: \"\",\n                items: res.data.data,\n                prikazi: true\n              });\n            }\n          }\n        }).catch(err => {\n          console.log(err);\n          this.setState({\n            prikazi: false,\n            emptyMsg: \"\"\n          });\n        });\n      } else {\n        this.setState({\n          prikazi: false,\n          emptyMsg: \"\"\n        });\n      }\n    };\n\n    this.addToCart = itemId => {\n      axios.post(\"http://localhost:8080/cart/add\", {\n        cartId: this.state.cartId,\n        itemId: itemId\n      }).then(res => {\n        if (res.data.success) {\n          this.setState({\n            show: \"visible\"\n          }); //stavimo u localstorage \n\n          if (window.localStorage.getItem(\"addedToCart\") == null) {\n            var addedToCart = [];\n            addedToCart[0] = res.data.data.insertId;\n            localStorage.setItem(\"addedToCart\", addedToCart.toString());\n          } else {\n            //dodamo u niz addedToCart novi id\n            var novi = localStorage.getItem(\"addedToCart\").split(',');\n            novi.push(res.data.data.insertId);\n            localStorage.setItem(\"addedToCart\", novi.toString());\n          }\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.state = {\n      items: [],\n      userId: window.localStorage.getItem(\"userId\"),\n      cartId: window.localStorage.getItem(\"cartId\"),\n      show: \"hidden\",\n      addedToCart: [],\n      keyword: \"\",\n      emptyMsg: \"\",\n      prikazi: false\n    };\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost:8080/items\").then(res => {\n      if (res.data.success) {\n        this.setState({\n          items: res.data.data\n        });\n      }\n\n      console.log(res.data.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container-fluid\",\n      style: {\n        backgroundColor: \"#efefef\",\n        fontFamily: \"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif\",\n        minHeight: \"calc(100vh - 80px)\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"d-flex justify-content-center\",\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"d-flex align-items-center\",\n      style: {\n        flexDirection: \"column\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      style: {\n        fontSize: \"15px\",\n        height: \"45px\",\n        width: \"500px\",\n        border: \"0px\",\n        padding: \"10px\",\n        boxSizing: \"border-box\"\n      },\n      name: \"searchbar\",\n      onChange: e => this.handleChange(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      style: {\n        width: \"100px\",\n        height: \"45px\",\n        fontSize: \"15px\",\n        backgroundColor: \"#2d2d2d\",\n        border: \"0px\",\n        color: \"white\"\n      },\n      onClick: e => this.handleSearch(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"SEARCH\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), this.state.emptyMsg)), React.createElement(\"div\", {\n      className: \"row mt-5 mx-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, this.state.prikazi ? this.state.items.map(x => React.createElement(React.Fragment, null, React.createElement(Item, {\n      itemName: x.result.name,\n      itemPrice: x.result.price + \"$\",\n      itemCategory: x.result.category,\n      src: x.imgUrl,\n      value: \"ADD TO CART\",\n      onClick: () => this.addToCart(x.result.item_id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }))) : \"\")), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Shop;","map":{"version":3,"sources":["C:\\Users\\Azra\\Desktop\\Zavrsni\\#tech\\pokusaj\\src\\Shop.js"],"names":["React","Header","Footer","Item","axios","Shop","Component","constructor","handleChange","e","setState","keyword","target","value","handleSearch","preventDefault","state","get","then","res","data","success","length","emptyMsg","prikazi","items","catch","err","console","log","addToCart","itemId","post","cartId","show","window","localStorage","getItem","addedToCart","insertId","setItem","toString","novi","split","push","userId","componentDidMount","render","backgroundColor","fontFamily","minHeight","width","flexDirection","fontSize","height","border","padding","boxSizing","color","map","x","result","name","price","category","imgUrl","item_id"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport Item from \"./Item\"\r\nimport axios from \"axios\";\r\n\r\nclass Shop extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            items: [],\r\n            userId: window.localStorage.getItem(\"userId\"),\r\n            cartId: window.localStorage.getItem(\"cartId\"),\r\n            show: \"hidden\",\r\n            addedToCart: [],\r\n            keyword:\"\",\r\n            emptyMsg:\"\",\r\n            prikazi:false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios\r\n            .get(\"http://localhost:8080/items\")\r\n            .then(res=>{\r\n                if(res.data.success){\r\n                    this.setState({\r\n                        items: res.data.data\r\n                    })\r\n                }\r\n                console.log(res.data.data);\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n            })\r\n    }\r\n    handleChange = (e) => {\r\n        //searchbar\r\n        this.setState({\r\n            keyword:e.target.value\r\n        })\r\n    }\r\n    handleSearch = (e) => {\r\n        e.preventDefault();\r\n        if(this.state.keyword!=\"\"){\r\n            axios\r\n            .get(\"http://localhost:8080/search/\" + this.state.keyword)\r\n            .then(res => {\r\n                if (res.data.success) {\r\n                    if(res.data.data.length==0){\r\n                        this.setState({\r\n                            emptyMsg:<label>There aren't any products with that name.</label>,\r\n                            prikazi:false\r\n                        })\r\n                    }\r\n                    else{\r\n                        this.setState({\r\n                            emptyMsg:\"\",\r\n                            items:res.data.data,\r\n                            prikazi:true\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                this.setState({\r\n                    prikazi:false,\r\n                    emptyMsg:\"\"\r\n                })\r\n            })\r\n        }\r\n        else{\r\n            this.setState({\r\n                prikazi:false,\r\n                emptyMsg:\"\"\r\n            })\r\n        }\r\n        \r\n    }\r\n    addToCart = (itemId) => {\r\n        axios\r\n            .post(\"http://localhost:8080/cart/add\", {\r\n                cartId: this.state.cartId,\r\n                itemId: itemId\r\n            })\r\n            .then(res => {\r\n                if (res.data.success) {\r\n                    this.setState({\r\n                        show: \"visible\"\r\n                    })\r\n                    //stavimo u localstorage \r\n                    if (window.localStorage.getItem(\"addedToCart\") == null) {\r\n                        var addedToCart = [];\r\n                        addedToCart[0] = res.data.data.insertId;\r\n                        localStorage.setItem(\"addedToCart\", addedToCart.toString())\r\n                    }\r\n                    else {\r\n                        //dodamo u niz addedToCart novi id\r\n                        var novi = localStorage.getItem(\"addedToCart\").split(',');\r\n                        novi.push(res.data.data.insertId);\r\n                        localStorage.setItem(\"addedToCart\", novi.toString());\r\n                    }\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Header />\r\n                <div className=\"container-fluid\"\r\n                    style={{\r\n                        backgroundColor: \"#efefef\",\r\n                        fontFamily: \"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif\",\r\n                        minHeight: \"calc(100vh - 80px)\"\r\n                    }}>\r\n                    <div className=\"d-flex justify-content-center\" style={{ width: \"100%\" }}>\r\n                        <div className=\"d-flex align-items-center\" style={{ flexDirection: \"column\" }}>\r\n                            <br></br>\r\n                            <form>\r\n                                <input type=\"text\"\r\n                                    style={{\r\n                                        fontSize: \"15px\",\r\n                                        height: \"45px\",\r\n                                        width: \"500px\",\r\n                                        border: \"0px\",\r\n                                        padding: \"10px\",\r\n                                        boxSizing: \"border-box\"\r\n                                    }}\r\n                                    name=\"searchbar\"\r\n                                    onChange={(e)=>this.handleChange(e)}\r\n                                />\r\n                                <button\r\n                                    style={{\r\n                                        width: \"100px\",\r\n                                        height: \"45px\",\r\n                                        fontSize: \"15px\",\r\n                                        backgroundColor: \"#2d2d2d\",\r\n                                        border: \"0px\",\r\n                                        color: \"white\"\r\n                                    }}\r\n                                    onClick={(e)=>this.handleSearch(e)}>\r\n                                    SEARCH</button>\r\n                            </form>\r\n                            <br></br>\r\n                            {this.state.emptyMsg}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row mt-5 mx-2\">\r\n                        \r\n                        {this.state.prikazi ? this.state.items.map(x =>\r\n                            <>\r\n                                <Item itemName={x.result.name} itemPrice={x.result.price + \"$\"} itemCategory={x.result.category} src={x.imgUrl} value=\"ADD TO CART\" onClick={() => this.addToCart(x.result.item_id)} />\r\n                            </>\r\n                        ) : \"\"}\r\n\r\n                    </div>\r\n\r\n                </div>\r\n                <Footer />\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Shop;"]},"metadata":{},"sourceType":"module"}